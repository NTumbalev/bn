{% extends '::base.html.twig' %}

{% import "::paginatorWithRouteAndSlug.html.twig" as pager %}

{% block main %}
    {% include '::breadCrumbs.html.twig' with {'breadCrumbs':breadCrumbs} %}

    <section id="main">
        {% include '::headerImage.html.twig' with {'content':companyCategory} %}

        <div class="mainBody">
            <div class="wrapper">
                {% set haveSideBar = false %}
                {% if sideBar is defined and sideBar is not null and sideBar|length %}
                    {% set haveSideBar = true %}
                {% endif %}
                <div class="mainContent{% if haveSideBar == false %} full{% endif %}">
                    <h1 class="titleMain">{{ companyCategory.title }}</h1>

                    {% if companyCategory.description is defined and companyCategory.description is not null and companyCategory.description|length %}
                        <article class="article">
                            {{ companyCategory.description|raw }}
                        </article>
                    {% endif %}
                    {% if categoryCompanies is defined and categoryCompanies is not null and categoryCompanies|length %}
                    <div class="boxes boxesCompanies">
                        {% for company in categoryCompanies %}
                            <div class="box">
                                <a href="{{ path('companies_category_company_view', company.routeParams({'categorySlug':companyCategory.slug,'slug':company.slug})) }}" class="photo" style="background-image: url({% if company.translations[app.request.locale].image is defined and company.translations[app.request.locale].image is not null and company.translations[app.request.locale].image|length %}{% path company.translations[app.request.locale].image, 'index' %}{% else %}'/assets/images/no-img.jpg'{% endif %});"></a>

                                <div class="content">
                                    <p class="title">
                                        <a href="{{ path('companies_category_company_view', company.routeParams({'categorySlug':companyCategory.slug,'slug':company.slug})) }}">
                                            {{ company.title }}
                                        </a>
                                    </p>

                                    {% if company.simpleDescription is defined and company.simpleDescription is not null and company.simpleDescription|length %}
                                        <div class="text">
                                            <p>{{ company.simpleDescription }}</p>
                                        </div>
                                    {% endif %}
                                </div>
                            </div><!-- /.box -->
                        {% endfor %}
                    </div><!-- /.boxes -->
                    {% else %}
                        <p class="msg">{{ 'no_companies'|trans({}, "messages")}}</p>
                    {% endif %}

                    {% if categoryCompanies is defined and categoryCompanies|length %}
                        {{ pager.pager(categoryCompanies, companyCategory.route, companyCategory.slug, 'categorySlug') }}
                    {% endif %}
                </div><!-- /.mainContent -->

                {% if haveSideBar %}
                    <aside class="sidebar">
                        <p class="titleAside">{{ content.title }}</p>

                        <nav class="navAside">
                            {{ sideBar|raw }}
                        </nav><!-- /.navAside -->
                    </aside><!-- /.sidebar -->
                {% endif %}
            </div><!-- /.wrapper -->
        </div><!-- /.mainBody -->
    </section>
{% endblock %}
